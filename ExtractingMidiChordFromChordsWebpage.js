(function(){var chordclass=document.getSelection().focusNode.parentElement.className;var lyricandchordhtml = document.getSelection().anchorNode.parentElement.offsetParent;var chordcount = lyricandchordhtml.getElementsByClassName(chordclass).length;for ( var x=0 ; x < chordcount; x++){var element = lyricandchordhtml.getElementsByClassName(chordclass)[x];var chordcap = element.innerText.trim();var chordary = chordcap.split("");var chordarylen = chordary.length;var chord = chordary[0];var chordsuf = chordcap.slice(1);if((chordary[1] == "#") || (chordary[1] == "b")){chord = chord+chordary[1];chordsuf= chordcap.slice(2)};var chordtext = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];var midinote = [ 60, 61,62,63,64,65,66,67,68,69,70,71];var chordtype = ["m", "dim" , "sus"];var chordnot2 = [-1,-1,1];var chordnot3 = [0,-1,7];var a = chordtext.indexOf(chord);chord = chordtext[a];if ( chordsuf ==""){var c = 0; var d = 0 }else {var c = chordnot2[chordtype.indexOf(chordsuf)];var d=chordnot3[chordtype.indexOf(chordsuf)];};var ChordTransposed = "noteOn("+ (Number(midinote[a])) +","+ (Number(midinote[a])+4+c) + "," + (Number(midinote[a])+7+d) +")";element.innerHTML = '<chordbutton ontouchstart='+ChordTransposed +'>' + chord + chordsuf + '</button>';element.removeAttribute("data-name");element.removeAttribute("style");}lyricandchordhtml;})();
